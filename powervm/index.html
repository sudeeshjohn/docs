<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Powervm - Automation for OpenShift on IBM Power</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">Automation for OpenShift on IBM Power</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../ocp4-upi-powervs/" class="nav-link">Deploying OpenShift on KVM</a>
                            </li>
                            <li class="navitem">
                                <a href="../ocp4-upi-powervs/" class="nav-link">Deploying OpenShift on IBM Cloud Power Virtual Servers</a>
                            </li>
                            <li class="navitem">
                                <a href="../ocp4-upi-powervm/" class="nav-link">Deploying OpenShift on PowerVM managed via PowerVC</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#introduction" class="nav-link">Introduction</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#pre-requisites" class="nav-link">Pre-requisites</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#image-and-lpar-requirements" class="nav-link">Image and LPAR requirements</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#ocp-install" class="nav-link">OCP Install</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="1"><a href="#contributing" class="nav-link">Contributing</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><strong><h2 style="text-align:center;">Deploying OpenShift on PowerVM managed via PowerVC</h2></strong></p>
<!-- # **Table of Contents** -->

<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#pre-requisites">Pre-requisites</a><ul>
<li><a href="#operating-systems">Operating Systems</a></li>
<li><a href="#packages">Packages</a></li>
</ul>
</li>
<li><a href="#image-and-lpar-requirements">Image and LPAR requirements</a></li>
<li><a href="#ocp-install">OCP Install</a></li>
<li><a href="#contributing">Contributing</a></li>
</ul>
<h1 id="introduction">Introduction</h1>
<p>This repo contains Terraform templates to help deployment of OpenShift Container Platform (OCP) 4.x on PowerVM LPARs.
This assumes PowerVC is used as the IaaS layer for managing the PowerVM LPARs.</p>
<p>If you are using standalone PowerVM please take a look at the <a href="https://github.com/RedHatOfficial/ocp4-helpernode/blob/devel/docs/quickstart-powervm.md">following quickstart guide</a>
which uses the <a href="https://github.com/RedHatOfficial/ocp4-helpernode">ansible playbook</a> to setup helper node (bastion) for OCP deployment.</p>
<p>This project also leverages the same ansible playbook internally for OCP deployment on PowerVM LPARs managed via PowerVC.</p>
<p>Run this code from either Mac or Linux (Intel) system. For automating setup, see
<a href="https://github.com/ocp-power-automation/ocp4-upi-powervm">OCP-UPI-PowerVM</a></p>
<blockquote>
<p><i class="fa fa-exclamation" style="color:red;"></i> <em>This automation is intended for test/development purposes only and there is no formal support. For bugs/enhancement requests etc. please open a GitHub issue</em></p>
</blockquote>
<h1 id="pre-requisites">Pre-requisites</h1>
<p>You need to identify a remote client machine for running the automation. This could be your laptop or a VM.</p>
<h3 id="operating-systems">Operating Systems</h3>
<p>This code has been tested on the following x86-64 based Operating Systems:
 - Linux
 - Mac OSX (Darwin)</p>
<h3 id="packages">Packages</h3>
<p>Install the below required packages on the client machine.</p>
<ul>
<li><strong>Git</strong>: Please refer to the <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">link</a> for instructions
on installing the latest Git.</li>
<li><strong>Terraform &gt;= 0.13.0</strong>: Please refer to the <a href="https://learn.hashicorp.com/terraform/getting-started/install.html">link</a> for instructions on installing Terraform. For validating the version run <code>terraform version</code> command after install.</li>
<li>Public internet connection for all the nodes to download the playbooks and images as part of the setup process.</li>
</ul>
<h1 id="image-and-lpar-requirements">Image and LPAR requirements</h1>
<p>You'll need to create RedHat CoreOS (RHCOS) and RHEL 8.0 (or later) image in PowerVC. For RHCOS image creation, follow the steps mentioned
in the following <a href="https://github.com/ocp-power-automation/ocp4-upi-powervm/blob/master/docs/coreos-image-creation.md">doc</a>.</p>
<p>Following are the recommended LPAR configs for OpenShift nodes that will be deployed with RHCOS image.
- Bootstrap, Master - 2 vCPUs, 16GB RAM, 120 GB Disk.</p>
<p>PowerVM LPARs by default uses SMT=8. So with 2vCPUs, the number of logical CPUs as seen by the Operating System will be <strong>16</strong> (<code>2 vCPUs x 8 SMT</code>)</p>
<p><strong><em>This config is suitable for majority of the scenarios</em></strong>
- Worker - 2 vCPUs, 16GB RAM, 120 GB Disk</p>
<p><strong><em>Increase worker vCPUs, RAM and Disk based on application requirements</em></strong></p>
<p>Following is the recommended LPAR config for the helper node that will be deployed with RHEL 8.0 (or later) image.
- Helper node (bastion) - 2vCPUs, 16GB RAM, 200 GB Disk</p>
<h1 id="ocp-install">OCP Install</h1>
<p>Follow these <a href="https://github.com/ocp-power-automation/ocp4-upi-powervm/blob/master/docs/quickstart.md">quickstart</a> steps to kickstart OCP installation on PowerVM LPARs managed via PowerVC</p>
<h1 id="contributing">Contributing</h1>
<p>Please see the <a href="https://github.com/ocp-power-automation/ocp4-upi-powervm/blob/master/CONTRIBUTING.md">contributing doc</a> for more details.
PRs are most welcome !!</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
