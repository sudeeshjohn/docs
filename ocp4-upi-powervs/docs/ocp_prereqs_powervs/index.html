
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.6">
    
    
      
        <title>**PowerVS Prerequisites** - Automation for OpenShift on IBM Power</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6910b76c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#powervs-prerequisites" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="Automation for OpenShift on IBM Power" class="md-header-nav__button md-logo" aria-label="Automation for OpenShift on IBM Power">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Automation for OpenShift on IBM Power
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              **PowerVS Prerequisites**
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Automation for OpenShift on IBM Power" class="md-nav__button md-logo" aria-label="Automation for OpenShift on IBM Power">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Automation for OpenShift on IBM Power
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../" class="md-nav__link">
      Deploying OpenShift on IBM Cloud Power Virtual Servers
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../ocp4-upi-powervm/" class="md-nav__link">
      Deploying OpenShift on PowerVM managed via PowerVC
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../ocp4-upi-kvm/" class="md-nav__link">
      Deploying OpenShift on KVM
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#ibm-cloud-account" class="md-nav__link">
    IBM Cloud Account
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-power-systems-virtual-server-service-instance" class="md-nav__link">
    Create Power Systems Virtual Server Service Instance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-private-network" class="md-nav__link">
    Create Private Network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#raise-a-service-request-to-enable-ip-communication-between-powervs-instances-on-private-network" class="md-nav__link">
    Raise a Service Request to enable IP communication between PowerVS instances on private network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rhcos-and-rhel-82-images-for-openshift" class="md-nav__link">
    RHCOS and RHEL 8.2 Images for OpenShift
  </a>
  
    <nav class="md-nav" aria-label="RHCOS and RHEL 8.2 Images for OpenShift">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#creating-ova-images" class="md-nav__link">
    Creating OVA images
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#uploading-to-ibm-cloud-object-storage" class="md-nav__link">
    Uploading to IBM Cloud Object Storage
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#importing-the-images-in-powervs" class="md-nav__link">
    Importing the images in PowerVS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="powervs-prerequisites"><strong>PowerVS Prerequisites</strong></h1>
<hr />
<h2 id="ibm-cloud-account">IBM Cloud Account</h2>
<p>You'll need to have an IBM Cloud Account to be able to use Power Systems Virtual Server (PowerVS).</p>
<h2 id="create-power-systems-virtual-server-service-instance">Create Power Systems Virtual Server Service Instance</h2>
<p>Login to <a href="https://cloud.ibm.com">IBM Cloud Dashboard</a> and search for "<strong>Power</strong>" in the <strong>Catalog</strong>.
Select "<strong>Power Systems Virtual Server</strong>" and provide all the required inputs
to create the service instance.</p>
<p><img alt="Search for Power" src="../media/image1.png" /></p>
<p><img alt="Select Power Systems Virtual Server" src="../media/image2.png" /></p>
<p><img alt="Fill Details" src="../media/image3.png" />
1. Provide a meaningful name for your instance in the <strong>Service name</strong> field.
2. Select the proper <strong>resource group</strong>. More details on resource groups is available from the following <a href="https://cloud.ibm.com/docs/account?topic=account-rgs">link</a></p>
<p><img alt="Provide service name" src="../media/image4.png" /></p>
<p><img alt="Create service" src="../media/image5.png" /></p>
<h2 id="create-private-network">Create Private Network</h2>
<p>A private network is required for your OCP cluster. Choose the previously created "<strong>Service Instance</strong>" and create a private subnet by selecting "<strong>Subnets</strong>" and providing the required inputs. If you see a screen displaying CRN and GUID, then click "View full details" to access the "Subnet" creation page.</p>
<p>You can create multiple OCP clusters in the same service instance using the same private network. If required you can also create multiple private networks.</p>
<p>Provide the required inputs for private subnet creation
<img alt="Select subnet" src="../media/image6.png" /></p>
<p><img alt="Provide Input" src="../media/image7.png" /></p>
<p><img alt="Create subnet" src="../media/image8.png" /></p>
<h2 id="raise-a-service-request-to-enable-ip-communication-between-powervs-instances-on-private-network">Raise a Service Request to enable IP communication between PowerVS instances on private network</h2>
<p>In order for your instances to communicate within the subnet, you'll need to create a service request.</p>
<p>Click on <strong>Support</strong> in the top bar and scroll down to <strong>Contact Support</strong>, then select "<strong>Create a case</strong>"</p>
<p><img alt="Create a case" src="../media/image9.png" /></p>
<p>Select "<strong>Power Systems Virtual Server</strong>" tile</p>
<p><img alt="Create a case Page" src="../media/image10.png" /></p>
<p>Complete the details as shown using the following template:</p>
<ul>
<li>[Subject:] Enable communication between PowerVS instances on private network</li>
<li>[Body:]
  <code>Please enable IP communication between PowerVS instances for the following private network:
    Name: &lt;your-subnet-name-from-above&gt;
    Type: Private
    CIDR: &lt;your ip subnet-from-above&gt;
    VLAN ID: &lt;your-vlan-id&gt; (listed in your subnet details post-creation)
    Location: &lt;your-location&gt; (listed in your subnet details post-creation)
    Service Instance: &lt;your-service-name&gt;</code></li>
</ul>
<p><img alt="Sample support request " src="../media/image11.png" /></p>
<p>Click "<strong>Continue</strong>" to accept agreements, and then Click "<strong>Submit case</strong>".</p>
<p><img alt="Submit Case" src="../media/image12.png" /></p>
<h2 id="rhcos-and-rhel-82-images-for-openshift">RHCOS and RHEL 8.2 Images for OpenShift</h2>
<p>RHEL image is used for bastion and RHCOS is used for the OpenShift cluster nodes.</p>
<p>You'll need to create <a href="https://en.wikipedia.org/wiki/Open_Virtualization_Format">OVA</a> formatted images for RHEL and RHCOS, upload them to IBM Cloud Object storage and then import these images as boot images in your PowerVS service instance.</p>
<p>Further, the image disk should be minimum of 120 GB in size.</p>
<h3 id="creating-ova-images">Creating OVA images</h3>
<ul>
<li>If you have PowerVC then you can follow the instructions provided in the <a href="https://www.ibm.com/support/knowledgecenter/en/SSXK2N_1.4.4/com.ibm.powervc.standard.help.doc/powervc_export_image_hmc.html">link</a> to export an existing PowerVC image to OVA image.</li>
<li>You can also use the following <a href="https://github.com/ocp-power-automation/infra/blob/master/scripts/images/convert_qcow2_ova.py">python script</a> to convert Qcow2 image to OVA</li>
<li>RHEL 8.2 Qcow2 image is available from the following <a href="https://access.redhat.com/downloads/content/279/ver=/rhel---8/8.2/ppc64le/product-software">link</a></li>
<li>RHCOS Qcow2 image is available from the following <a href="https://mirror.openshift.com/pub/openshift-v4/ppc64le/dependencies/rhcos/4.5/">link</a></li>
</ul>
<h3 id="uploading-to-ibm-cloud-object-storage">Uploading to IBM Cloud Object Storage</h3>
<ul>
<li><strong>Create IBM Cloud Object Storage service and bucket</strong>
Please refer to the following <a href="https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-getting-started-cloud-object-storage">link</a> for instructions to create IBM Cloud Object Storage service and required storage bucket to upload the OVA images.
<br></li>
<li><strong>Create secret and access keys with Hash-based Message Authentication Code (HMAC)</strong>
Please refer to the following <a href="https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-uhc-hmac-credentials-main">link</a> for instructions to create the keys required for importing the images into your PowerVS service instance.
<br></li>
<li><strong>Upload the OVA image to Cloud Object storage bucket</strong>
Please refer to the following <a href="https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-upload">link</a> for uploading the OVA image to the respective bucket. Alternatively you can also use the following <a href="https://github.com/ocp-power-automation/infra/blob/master/scripts/images/upload_image.py">python script</a>.</li>
</ul>
<h3 id="importing-the-images-in-powervs">Importing the images in PowerVS</h3>
<p>Choose the previously created PowerVS "Service Instance", click "View full details" and select "Boot images".
Click the "Importing image" option and fill the requisite details like image name, storage type and cloud object storage details.</p>
<p>Example screenshot showing import of RHEL image that is used for bastion
<img alt="Image Import-RHEL" src="../media/image-import1.png" /></p>
<p>Example screenshot showing import of RHCOS image used for OCP
<img alt="Image Import-RHCOS" src="../media/image-import2.png" /></p>
<p>Your PowerVS service instance is now ready for OpenShift clusters.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.fd16492e.min.js"></script>
      <script src="../../../assets/javascripts/bundle.7836ba4d.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>